<!doctype html>
<html lang="en">
<head>
    <title>Formula 1 Predictor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/bootstrap.js"></script>

</head>
<body>
<div class="navbar navbar-inverse navbar-static-top">
    <div class="container">
        <a href="index.php" class="navbar-brand">F1 Predictor 2015</a>

        <button class = "navbar-toggle" data-toggle = "collapse" data-target = ".navHeaderCollapse">
            <span class = "icon-bar"></span>
            <span class = "icon-bar"></span>
            <span class = "icon-bar"></span>
        </button>

        <div class="collapse navbar-collapse navHeaderCollapse">
            <ul class = "nav navbar-nav navbar-right">
                <li class = "active"><a href="index.php">Home</a></li>

                <li><a href="rules.html">Rules</a></li>
                <!--
                <li><a href="login.html">Log In</a></li>
                <li><a href="Register.html">Register</a></li>
                -->
            </ul>
        </div>
    </div>
</div>

<div class = "navbar navbar-default navbar-fixed-bottom">
    <div class = "container">
        <p class = "navbar-text pull-left">Please send e-mail to <a href="#contact" data-toggle="modal">pmc@cs.stir.ac.uk</a> to be registered to this website</p>
    </div>
</div>
<script>

    var constructorNames = [];
    var constructorPrices = [];
    var driverPrices = [];
    var driverNames = [];

    var myBudget = document.getElementById('carriedOver').value;
    var elem = document.getElementById("remainingBudget");
    elem.value = myBudget;

    $('#constructor1DropDown').on('click', function()
    {

        alert("test");
//
// var Constructor1FullName = $("#constructor1DropDown option:selected").val();
//        var index = Constructor1FullName.indexOf(",");
//        constructor1Name = Constructor1FullName.substr(0,index);
//        constructor1Value = $("#constructor1DropDown option:selected").val().split(",").pop();
//        document.getElementById("remainingBudget").value = calcTotal();
//        checkValue();
    });

    var firstSelected = null;
    var secondSelected = null;

    //initally order select lists (this is a bit of cheat, to help later on


    $('#driver1DropDown').change(function() {
        alert("hiya");
        //remove the currently selected option from 2nd/3rd drop down
        var selectedValue = $('#driver1DropDown option:selected')
        if (selectedValue.val() != "") {

            $('#driver2DropDown option[value="' + selectedValue.val() + '"]').remove();
        }
        else {
            selectedValue = null;
        }

        //add previous item back in to 2nd/3rd drop down
        if (firstSelected != null) {
            $('#driver2DropDown').append($('<option>', { value : firstSelected.val() }).text(firstSelected.text()));

        }

        //save the currently selected value
        firstSelected = selectedValue;
    });

    $.getJSON("drivers.php", function(data) {
        $.each(data, function(key,val) {
            driverNames.push(val.Name);
            driverPrices.push(val.Price);
            $("#driver1DropDown").append($("<option />").val(val.Name + "," + val.Price).text(val.Name + " " + val.Price));
            $("#driver2DropDown").append($("<option />").val(val.Name + "," + val.Price).text(val.Name + " " + val.Price));
        })
    });

    $.getJSON("constructors.php", function(data) {
        $.each(data, function(key,val) {
            constructorNames.push(val.Name);
            constructorPrices.push(val.Price);
            $("#constructor1DropDown").append($("<option />").val(val.Name + "," + val.Price).text(val.Name + " " + val.Price));
            $("#constructor2DropDown").append($("<option />").val(val.Name + "," + val.Price).text(val.Name + " " + val.Price));
        })
    });
</script>
</body>
</html>